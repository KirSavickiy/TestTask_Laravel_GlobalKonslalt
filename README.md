# Разработка функционала на Laravel с базой данных PostgreSQL

## Описание функционала

Необходимо реализовать функционал для работы с продуктами в приложении на Laravel и базе данных PostgreSQL. Основной функционал включает:

1. **Вывод списка продуктов**
2. **Просмотр карточки продукта**
3. **Добавление, редактирование и удаление продукта**

## Создание таблицы «products»

Создать таблицу `products` с следующими полями:

| Поле      | Тип данных     | Описание |
|-----------|----------------|----------|
| `ID`      | `uint, autoincrement` | Уникальный идентификатор продукта |
| `ARTICLE` | `varchar(255)`  | Уникальный индекс, артикул продукта |
| `NAME`    | `varchar(255)`  | Название продукта |
| `STATUS`  | `varchar(255)`  | Статус: `"available" | "unavailable"` |
| `DATA`    | `jsonb`         | Дополнительные поля, например, `Color` и `Size` |
| `timestamps` | -              | Время создания и обновления |
| `soft deletes` | -            | Поддержка мягкого удаления |

## Создание модели Eloquent «Product»

Создать модель **Product**, связанную с таблицей **products**. В модели реализовать **Local Scope** для получения только доступных продуктов (где `STATUS = "available"`).

## Валидация создания и редактирования

Реализовать валидацию для полей:

- `NAME`: обязательное поле, длиной не менее 10 символов.
- `ARTICLE`: обязательное поле, только латинские символы и цифры, уникальное в таблице.

## Роли пользователей

Создать роль администратора, который может редактировать **артикул**. Остальным пользователям разрешено редактировать все поля, кроме **артикула**.

- Роль пользователя определяется через конфигурацию: `config('products.role')`.
- Реализовать проверку прав в контроллере, модели или отдельном сервисе (по усмотрению).

## Дополнительные требования

1. При создании продукта реализовать отправку уведомления на заданный в конфигурации Email (через `config('products.email')`).
2. Уведомление должно отправляться через задачу (Job) в очереди (Queue).
3. Готовое приложение упаковать в **Docker**.
------------------------------------------------------------------------------------------------------------------------------------
# Проект доступен по адресу:
[http://5.35.91.249:8081/](http://5.35.91.249:8081/)

Для входа используйте следующие данные:
- **Email**: `test@email.com`
- **Пароль**: `password`
--------------------------------------------------------------------------------------------------------------------------------------
# Инструкция по развертыванию проекта

## Шаг 1: Клонирование репозитория
Клонируйте репозиторий и перейдите в папку проекта:
```bash
git clone https://github.com/KirSavickiy/TestTask_Laravel_GlobalKonslalt.git
cd TestTask_Laravel_GlobalKonslalt
```

## Шаг 2: Создание `.env` файла
Скопируйте файл `.env.example` в `.env`:
```bash
cp .env.example .env
```
При необходимости отредактируйте параметры подключения к базе данных, очередям и другим сервисам.

## Шаг 3: Запуск Docker-контейнеров
Запустите контейнеры с помощью `docker-compose`:
```bash
docker-compose up -d
```

## Шаг 4: Установка зависимостей
Перейдите в контейнер `app`:
```bash
docker exec -it app bash
```

Выполните установку PHP-зависимостей и сборку фронтенда:
```bash
composer install
npm install
npm run build
```

## Шаг 5: Подготовка базы данных
1. Создайте базу данных с именем `laravel` в PostgreSQL.
2. Выполните команды для настройки приложения:
   ```bash
   php artisan key:generate
   php artisan migrate
   php artisan db:seed
   ```

## Шаг 6: Готово
После выполнения всех шагов проект будет доступен по адресу, указанному в `.env`, например:
```
http://localhost:8081
```
## Примечания
1. Убедитесь, что в файле `.env` указаны корректные параметры подключения к базе данных (`DB_HOST`, `DB_PORT`, `DB_DATABASE`, `DB_USERNAME`, `DB_PASSWORD`).
2. Если проект использует очередь, настройте драйвер (`QUEUE_CONNECTION`) в `.env` и убедитесь, что контейнер для очереди запущен.
3. Для сборки фронтенда может потребоваться Node.js и npm, которые устанавливаются в контейнере `app`.
